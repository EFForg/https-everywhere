<!--
	For rules not causing  MCB, see 163.com.xml.
-->

<ruleset name="163.com-problematic">

	<target host="1.163.com" />

		<exclusion pattern="^http://1.163.com/$" />
		
		<rule from="^http://1\.163\.com/favicon\.ico" to="https://1.163.com/favicon.ico" />
			<test url="http://1.163.com/favicon.ico/" />

		<rule from="^http://1\.163\.com/appguide/getconfig\.do" to="https://1.163.com/appguide/getconfig.do" />
			<test url="http://1.163.com/appguide/getconfig.do" />

		<rule from="^http://1\.163\.com/goods/query\.do" to="https://1.163.com/goods/query.do" />
			<test url="http://1.163.com/goods/query.do" />

		<rule from="^http://1\.163\.com/hd/oneact/validActlist\.do" to="https://1.163.com/hd/oneact/validActlist.do" />
			<test url="http://1.163.com/hd/oneact/validActlist.do" />

		<rule from="^http://1\.163\.com/kpimission/actregu\.do" to="https://1.163.com/kpimission/actregu.do" />
			<test url="http://1.163.com/kpimission/actregu.do" />

		<rule from="^http://1\.163\.com/user/global\.do" to="https://1.163.com/user/global.do" />
			<test url="http://1.163.com/user/global.do" />
			

	<target host="baoxian.163.com" />

		<exclusion pattern="^http://baoxian.163.com/$" />
		
		<rule from="^http://baoxian\.163\.com/(activity|car|message)/(.+)\.html"
			to="https://baoxian.163.com/$1/$2.html" />
			<test url="http://baoxian.163.com/activity/renewal/pop.html" />
			<test url="http://baoxian.163.com/car/cityConfig.html" />
			<test url="http://baoxian.163.com/message/getSysMsg.html" />
			<test url="http://baoxian.163.com/message/getSysMsg.html?cache=1467200264970" />
	

	<target host="email.163.com" />
	<target host="mail.163.com" />

		<exclusion pattern="^http://e?mail.163.com/$" />
		
		<rule from="^http://(e?mail)\.163\.com/favicon\.ico"
			to="https://$1.163.com/favicon.ico" />
			<test url="http://email.163.com/favicon.ico" />
			<test url="http://mail.163.com/favicon.ico" />
	

	<target host="i.money.163.com" />

		<exclusion pattern="^http://i.money.163.com/$" />
		
		<rule from="^http://i\.money\.163\.com/(.+)\.json"
			to="https://i.money.163.com/$1.json" />
			<test url="http://i.money.163.com/app/api/version/android.json" />
			<test url="http://i.money.163.com/hs/api/myStockList.json" />
			<test url="http://i.money.163.com/guess/bet/initBet.json" />


	<target host="piao.163.com" />

		<exclusion pattern="^http://piao.163.com/$" />
		
		<rule from="^http://piao\.163\.com/favicon\.ico/"
			to="https://piao.163.com/favicon.ico/" />
			<test url="http://piao.163.com/favicon.ico/" />
					
		<rule from="^http://piao\.163\.com/movie/get_phone\.html"
			to="https://piao.163.com/movie/get_phone.html" />
			<test url="http://piao.163.com/movie/get_phone.html" />


	<target host="study.163.com" />

		<exclusion pattern="^http://study.163.com/$" />
		
		<rule from="^http://study\.163\.com/crossdomain\.xml/"
			to="https://study.163.com/crossdomain.xml/" />
			<test url="http://study.163.com/crossdomain.xml/" />
	
		<rule from="^http://study\.163\.com/cdn/getCdnPoint\.htm"
			to="https://study.163.com/cdn/getCdnPoint.htm" />
			<test url="http://study.163.com/cdn/getCdnPoint.htm" />
			<test url="http://study.163.com/cdn/getCdnPoint.htm?" />
		
		<rule from="^http://study\.163\.com/course/anchorList\.htm\?lessonId"
			to="https://study.163.com/course/anchorList.htm?lessonId" />
			<test url="http://study.163.com/course/anchorList.htm?lessonId" />
			<test url="http://study.163.com/course/anchorList.htm?lessonId=495019" />

		<rule from="^http://study\.163\.com/res/images/(.+)\.png"
			to="https://study.163.com/res/images/$1.png" />
			<test url="http://study.163.com/res/images/logo4.png" />
			<test url="http://study.163.com/res/images/index/mfhk.png" />

	<!--	Rule 163.com-problematic causing problems on study.163.com · Issue #6200 · EFForg/https-everywhere
https://github.com/EFForg/https-everywhere/issues/6200#issuecomment-241583828
		<rule from="^http://study\.163\.com/dwr/(.+)\.dwr"
			to="https://study.163.com/dwr/$1.dwr" />	
			<test url="http://study.163.com/dwr/call/plaincall/MessageBean.getUnreadMessageCount.dwr" />
			<test url="http://study.163.com/dwr/call/plaincall/CommonBean.obtainByRandom.dwr" />
		-->

	<!--	Break all pages:
		<rule from="^http://study\.163\.com/h/"
			to="https://study.163.com/h/" />
			<test url="http://study.163.com/h/" />
		-->


	<target host="chat.study.163.com" />

		<exclusion pattern="^http://chat.study.163.com/$" />
		
		<rule from="^http://chat\.study\.163\.com/"
			to="https://chat.study.163.com/" />
			<test url="http://chat.study.163.com/res/swf/EduAudioPlayer.swf" />
			<test url="http://chat.study.163.com/study-chat/index.htm" />


	<target host="trip.163.com" />

		<exclusion pattern="^http://trip.163.com/$" />
		
		<rule from="^http://trip\.163\.com/favicon\.ico/"
			to="https://trip.163.com/favicon.ico/" />
			<test url="http://trip.163.com/favicon.ico/" />
					
		<rule from="^http://trip\.163\.com/ticket/queryTicketBookingCount\.do"
			to="https://trip.163.com/ticket/queryTicketBookingCount.do" />
			<test url="http://trip.163.com/ticket/queryTicketBookingCount.do" />

</ruleset>
