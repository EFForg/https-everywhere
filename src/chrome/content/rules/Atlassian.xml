<!--
	Other Atlassian rulesets:

		- BitBucket.xml


	CDN buckets:

		- dq1dnt4af4eyy.cloudfront.net

		- downloads.wpc.29c4.edgecastcdn.net/??29C4/

			- downloads

-->
<ruleset name="Atlassian">

	<target host="atlassian.com" />
	<target host="*.atlassian.com" />
	<target host="*.extranet.atlassian.com" />
	<target host="atlassian.wpengine.netdna-cdn.com" />


  <!-- excluding downloads. and disabling the securecookie clause in response to 
       https://trac.torproject.org/projects/tor/ticket/7206
       with further research this might be improvable -->

	<!-- 
      <securecookie host="^(.*\.)?atlassian\.com$" name=".*" /> 


	UPDATE: looks like downloads is properly configured now.
								-->
  <!--exclusion pattern="http://downloads\.atlassian\.com/" /-->


	<securecookie host="^(?:ace|answers|aug|confluence|developer|jira|marketplace|my)\.atlassian\.com$" name=".+" />


	<!--	!www 404s	-->
	<rule from="^http://(?:www\.)?atlassian\.com/"
		to="https://www.atlassian.com/"/>

	<!--	Matches:

			- ace
			- answers
			- aug
			- blogs
			- confluence
			- developer
			- docs
			- downloads
			- extranet
			- bamboo.extranet
			- jira
			- marketplace
			- my
			- plugins
			- studio
			- summit
			- support

		There doesn't appear to be any unsupported domains.	-->
	<rule from="^http://([\w\.]+)\.atlassian\.com/"
		to="https://$1.atlassian.com/" />

	<!--	Cert: *.userzoom.com
		/$ 403s, rest 404s.	-->
	<rule from="^https?://atlassian\.wpengine\.netdna-cdn\.com/"
		to="https://blogs.atlassian.com/" />

	<!--	Cert: gp1.wac.edgecastcdn.net
		Actually redirects as so.	-->
	<rule from="^https?://wac\.29c4\.edgecastcdn\.net/8029C4/wac-small//wac/"
		to="https://summit.atlassian.com/" />

</ruleset>
