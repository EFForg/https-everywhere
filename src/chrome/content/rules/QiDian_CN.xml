<!--
	Other ruleset:
		QiDian.xml

	Subdomains (acts/book) appearing in this ruleset have 2 main reasons:
	1. They are using non-https CDN overseas
	2. They are dropped by The Great Firewall when foreign visitors try to use https connection.
	Tested by Tor Browser 6.0.5
	Chinese users can manually enable this ruleset.
	
	^(www.)? are not "Only avaiable in China".
	However, all the pages with .aspx are old style, MCB.
  	Some of them need to be redirected to book.qidian.com
-->

<ruleset name="QiDian_CN">

	<target host="qidian.com" />
	<target host="www.qidian.com" />

	<rule from="^https?://(www\.)?qidian\.com/Book/(\d+)\.aspx"
			to="https://book.qidian.com/info/$2" />
		<test url="http://qidian.com/Book/2825.aspx" />
		<test url="http://www.qidian.com/Book/2825.aspx" />
		<test url="https://qidian.com/Book/2825.aspx" />
		<test url="https://www.qidian.com/Book/2825.aspx" />

	<rule from="^http://(www\.)?qidian\.com/"
			to="https://www.qidian.com/" />
	<exclusion pattern="^http://www\.qidian\.com/2009$" />
		<test url="http://www.qidian.com/" />
		<test url="http://www.qidian.com/2009" />
	<exclusion pattern="^http://www\.qidian\.com/News/\w+\.aspx" />
		<test url="http://www.qidian.com/News/NewsList.aspx?TypeID=1000000" />
		<test url="http://www.qidian.com/News/ShowNews.aspx?newsiD=1076615" />


	<target host="acts.qidian.com" />
	<target host="book.qidian.com" />
	<target host="file1.qidian.com" />
	<target host="file2.qidian.com" />
	<target host="grey.qidian.com" />
	<target host="isdspeed.qidian.com" />
	<target host="qrcode.if.qidian.com" />
	<target host="reader.qidian.com" />
	<rule from="^http://(acts|book|file1|file2|grey|isdspeed|qrcode\.if|reader)\.qidian\.com/" to="https://$1.qidian.com/" />
		<test url="http://acts.qidian.com/" />
		<test url="http://book.qidian.com/info/2825" />
		<test url="http://file1.qidian.com/" />
		<test url="http://file2.qidian.com/" />
		<test url="http://grey.qidian.com/" />
		<test url="http://isdspeed.qidian.com/" />
		<test url="http://qrcode.if.qidian.com/" />
		<test url="http://read.qidian.com/chapter/9LxyoriyyTk1/thfYwA2EgXAex0RJOkJclQ2" />


	<target host="*.qidian.com" />
	<rule from="^http://(\d+)\.qidian\.com/$"
			to="https://book.qidian.com/info/$1" />
		<test url="http://3508069.qidian.com/" />
		<test url="http://1004142144.qidian.com/" />

</ruleset>
